function outdata = scaleNorm( indata, minval, maxval)
% scale a matrix using the inputs min and max values
%

Nx = indata(:,:,1);
Ny = indata(:,:,2);
Nz = indata(:,:,3);

xmin=min( Nx(:) );
ymin=min( Ny(:) );
zmin=min( Nz(:) );

outx = Nx - xmin;
outy = Ny - ymin;
outz = Nz - zmin;

rangeX = range( outx(:) );
rangeY = range( outy(:) );
rangeZ = range( outz(:) );

%outdata = indata - min( indata(:) );
outx = ( outx/(rangeX + eps) ) * (maxval - minval);
outy = ( outy/(rangeY + eps) ) * (maxval - minval);
outz = ( outz/(rangeZ + eps) ) * (maxval - minval);

outx = outx + minval;
outy = outy + minval;
outz = outz + minval;

outdata(:,:,1) = outx;
outdata(:,:,2) = outy;
outdata(:,:,3) = outz;

end

